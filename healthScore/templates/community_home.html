<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Community</title>
<style>
    #topics_container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
    }
    .topic {
        margin-bottom: 20px;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
    }
    .topic h2 {
        margin-top: 0;
    }
    .topic_content {
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
    }
    .expand_topic {
        color: blue;
        cursor: pointer;
    }
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      background-color: #FFFFFF;
    }
    .logo {
      width: 350px;
      height: 100px;
    }
    .buttons {
      display: flex;
      gap: 15px;
      padding-right: 10px;
    }
    .register-button{
      background-color: #5B0888;
      font-size: 15px;
      color: #FFFFFF;
      border: none;
      padding: 10px 20px;
      border-radius: 10px;
      cursor: pointer;
    }
    .register-button:hover{
      background-color: #2d0444;
    }
    .login-button{
      background-color: transparent;
      font-size: 15px;
      color: #5B0888;
      font-weight: bold;
      border: none;
      padding: 10px 20px;
      border-radius: 20px;
      cursor: pointer;
    }
    .login-button:hover{
      color: #2d0444;
    }
    .user-dropdown {
      position: relative;
      display: inline-block;
    }
    .user-button {
      background: transparent;
      border: none;
      cursor: pointer;
    }

    .user-dropdown-content {
      display: none;
      position: absolute;
      right: 0;
      background-color: #f9f9f9;
      min-width: 160px;
      box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
      z-index: 1;
    }

    .user-dropdown-content a {
      color: black;
      padding: 12px 16px;
      text-decoration: none;
      display: block;
    }

    .user-dropdown-content a:hover {background-color: #f1f1f1}

    .user-dropdown:hover .user-dropdown-content {
      display: block;
    }
</style>
</head>

<body>
{%  include 'header.html' %}

<div id="topics_container">
    <h1>Community</h1>
    <div id="topics"></div>
</div>

{% block content %}
  <ul>
    {% for post in posts %}
      <li>
        <h3>{{ post.title }}</h3>
          <p>{{ post.description|linebreaks }}</p>
{#          <p>{{ post.id }}</p>#}
          <p class="expand_topic"><a href="{% url 'view_one_topic' post.id %}">Read more ></a></p>
          <small>Date: {{ post.createdAt }}</small>

      </li>
    {% endfor %}
  </ul>
{% endblock %}


{#<script>#}
{#    document.addEventListener("DOMContentLoaded", function() {#}
{#        const topicsContainer = document.getElementById("topics_container");#}
{#        const topics = document.getElementById("topics")#}

{#      /* samples for demonstration#}
{#        const topicsData = [#}
{#            { title: "Lower elbow pain when working out", content: "I've been encountering some discomfort in my lower elbow during my workout sessions lately, and I'm hoping to gather some insights or tips from those who might have experienced something similar. Specifically, the pain seems to manifest around the lower portion of my elbow, especially during exercises like bicep curls, tricep extensions, and push-ups. It's not excruciating, but it's enough to be noticeable and concerning." },#}
{#            { title: "Dealing with stress and anxiety as a student", content: "Stress and anxiety can manifest in various ways, affecting our focus, motivation, and overall well-being. Whether it's looming deadlines, exam pressures, or the challenges of balancing academic and personal life, it's essential to find healthy ways to cope. I'm curious to hear from others who have experienced similar feelings. How do you manage stress and anxiety as a student? Are there specific techniques or practices that have been particularly effective for you? Whether it's mindfulness exercises, time management strategies, seeking support from friends or professionals, or anything else, I'm open to exploring different approaches." }#}
{#        ];#}
{##}
{#        // Show the topics#}
{#        topicsData.forEach(function(topic) {#}
{#            const topicElement = document.createElement("div");#}
{#            topicElement.classList.add("topic");#}
{#            topicElement.innerHTML = `#}
{#                <h2>${topic.title}</h2>#}
{#                <p class="post-content">${truncate(topic.content, 100)}</p>#}
{#                <p class="expand_topic">Read more ></p>#}
{##}
{#            `;#}
{#            topicsContainer.appendChild(topicElement);#}
{#        });*/#}

{#    // Fetch topics from backend#}


    {#fetch('{% url "view_posts" %}')#}
    {#    .then(response => response.json())#}
    {#    .then(data => {#}
    {#        console.log(data)#}
    {#        data.forEach(topic => {#}
    {#            const topicElement = document.createElement("div");#}
    {#            topicElement.classList.add("topic");#}
    {#            topicElement.innerHTML = `#}
    {#                <h2>${topic.title}</h2>#}
    {#                <p class="post-content">${truncate(topic.description, 100)}</p>#}
    {#                <p class="expand_topic"><a href="/view_one_topic/${topic.id}">Read more ></a></p>#}
    {#            `;#}
    {#            topics.appendChild(topicElement);#}
    {#        });#}
    {#    })#}
    {#    .catch(error => {#}
    {#        console.error('Error fetching topics:', error);#}
    {#    });#}

{##}
{#      // show only beginning of topic content#}
{#      function truncate(content, maxLength) {#}
{#            if (content.length > maxLength) {#}
{#                return content.substring(0, maxLength) + '...';#}
{#            }#}
{#            return content;#}
{#        }#}
{##}
{#    });#}
{#</script>#}

</body>
</html>